---
layout: post
title: "íŒŒì´ì¬ ë°ì´í„°ë¶„ì„ ì‹¤ë¬´ í…Œí¬ë‹‰ 100 : 7. ë¬¼ë¥˜ ë„¤íŠ¸ì›Œí¬ ìµœì  ì„¤ê³„ë¥¼ ìœ„í•œ í…Œí¬ë‹‰ 10"
date: 2024-10-05 03:01:45 +0900
categories: íŒŒì´ì¬_ë°ì´í„°ë¶„ì„_ì‹¤ë¬´_í…Œí¬ë‹‰_100
---
## <span style= 'background-color: #f1f8ff'>ê³ ê°ì˜ ì†Œë¦¬
ğŸ—£ï¸ ì°½ê³ ì—ì„œ ê³µì¥ê¹Œì§€ì˜ ìš´ì†¡ ë¹„ìš©ì„ ì¡°ì •í•˜ëŠ” ê²ƒë§Œìœ¼ë¡œë„ ìµœì í™” ê°€ëŠ¥ì„±ì´ ë³´ì˜€ìŠµë‹ˆë‹¤. ê³„ì†í•´ì„œ ë¶„ì„ì„ ë¶€íƒë“œë¦½ë‹ˆë‹¤. ì´ì™•ì´ë©´ ìš°ë¦¬ íšŒì‚¬ì˜ ì œì¡°ì—ì„œ ë¬¼ë¥˜ê¹Œì§€ì˜ ì „ì²´ íë¦„ ì¤‘ ì–´ë””ì— ë¹„ìš© ê°œì„  ê°€ëŠ¥ì„±ì´ ìˆëŠ”ì§€ ë¶„ì„í•´ ì£¼ì…¨ìœ¼ë©´ í•©ë‹ˆë‹¤.


## <span style= 'background-color: #f1f8ff'>7-0: ì „ì œì¡°ê±´
ğŸ’¡ ì´ ê¸°ì—…ì´ ë‹¤ë£¨ëŠ” ë¬¼ë¥˜ì˜ ì „ì²´ ëª¨ìŠµì€ ê·¸ë¦¼ 7-1ê³¼ ê°™ì€ ë¬¼ë¥˜ ë„¤íŠ¸ì›Œí¬ì…ë‹ˆë‹¤. ìµœì¢…ì ìœ¼ë¡œ ì œí’ˆì„ íŒë§¤í•˜ëŠ” ëŒ€ë¦¬ì (P,Q)ì´ ìˆê³  ê±°ê¸°ì— íŒë§¤ë˜ëŠ” ìƒí’ˆêµ°(ì œí’ˆ A,B)ì—ëŠ” ì¼ì • ìˆ˜ìš”ê°€ ì˜ˆì¸¡ë˜ì–´ ìˆì–´, ì´ ìˆ˜ìš”ëŸ‰ì„ ê·¼ê±°ë¡œ ê³µì¥(ê³µì¥ X,Y)ì—ì„œì˜ ìƒì‚°ëŸ‰ì„ ê²°ì •í•©ë‹ˆë‹¤. ê°ê° ì œí’ˆì„ ì–´ëŠ ê³µì¥ì˜ ì–´ëŠ ìƒì‚°ë¼ì¸(ë ˆì¸ 0,1)ì—ì„œ ì œì¡°í• ì§€ì— ëŒ€í•´ì„œëŠ” ê° ê³µì¥ì—ì„œ ëŒ€ë¦¬ì ìœ¼ë¡œê¹Œì§€ì˜ ìš´ì†¡ë¹„, ì œê³  ë¹„ìš© ë“±ì„ ê³ ë ¤í•´ì„œ ê²°ì •í•©ë‹ˆë‹¤.
![image](https://github.com/user-attachments/assets/f1d19564-4071-4325-98dc-78a82cc3c27f)


## <span style= 'background-color: #f1f8ff'>7-1: ìš´ì†¡ ìµœì í™” ë¬¸ì œë¥¼ í’€ì–´ë³´ì
ğŸ—ƒï¸ ìµœì í™” ë¬¸ì œ í•´ê²° ì½”ë“œ: ìµœì í™” ëª¨ë¸ì„ ì‘ì„±í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì¸ pulpì™€ ëª©ì í•¨ìˆ˜ë¥¼ ìƒì„±í•´ì„œ ìµœì í™” ë¬¸ì œë¥¼ í‘¸ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì¸ ortoolpyë¥¼ ì´ìš©í•˜ì—¬ ì½”ë“œ ì‘ì„±.
```python
import numpy as np
import pandas as pd
from itertools import product
from pulp import LpVariable, lpSum, value
from ortoolpy import model_min, addvars, addvals

#ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° 
df_tc = pd.read_csv('trans_cost.csv', index_col="ê³µì¥")
df_demand = pd.read_csv('demand.csv')
df_supply = pd.read_csv('supply.csv')

#ì´ˆê¸° ì„¤ì •
np.random.seed(1)
nw = len(df_tc.index)
nf = len(df_tc.columns)
pr = list(product(range(nw), range(nf)))

#ìˆ˜ë¦¬ ëª¨ë¸ ì‘ì„±
m1 = model_min()
v1 = {(i,j):LpVariable('v%d_%d'%(i,j),lowBound=0) for i,j in pr}

m1 += lpSum(df_tc.iloc[i][j]*v1[i,j] for i,j in pr)
for i in range(nw):
    m1 += lpSum(v1[i,j] for j in range(nf)) <= df_supply.iloc[0][i]
for j in range(nf):
    m1 += lpSum(v1[i,j] for i in range(nw)) >= df_demand.iloc[0][j]
m1.solve()

#ì´ ìš´ì†¡ ë¹„ìš© ê³„ì‚°
df_tr_sol = df_tc.copy()
total_cost = 0
for k,x in v1.items():
    i,j = k[0],k[1]
    df_tr_sol.iloc[i][j] = value(x)
    total_cost += df_tc.iloc[i][j]*value(x)

print(df_tr_sol)
print("ì´ ìš´ì†¡ ë¹„ìš©:"+str(total_cost))
```
![image](https://github.com/user-attachments/assets/186e1a14-c0f8-4cd6-94a0-90c7b7e5bd83)


## <span style= 'background-color: #f1f8ff'>7-2: ìµœì  ìš´ì†¡ ê²½ë¡œë¥¼ ë„¤íŠ¸ì›Œí¬ë¡œ í™•ì¸í•˜ì
ğŸ—ƒï¸ ìš´ì†¡ ê²½ë¡œ ë„¤íŠ¸ì›Œí¬ ê°€ì‹œí™”
```python
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import networkx as nx

#ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
dt_tr = df_tr_sol.copy()
df_pos = pd.read_csv('trans_route_pos.csv')

#ê°ì²´ ìƒì„±
G = nx.Graph()

#ë…¸ë“œ ì„¤ì •
for i in range(len(df_pos.columns)):
    G.add_node(df_pos.columns[i])

#ì—£ì§€ ì„¤ì • ë° ì—£ì§€ì˜ ê°€ì¤‘ì¹˜ ë¦¬ìŠ¤íŠ¸í™”
num_pre = 0
edge_weights = []
size = 0.1
for i in range(len(df_pos.columns)):
    for j in range(len(df_pos.columns)):
        if not (i==j):
            #ì—£ì§€ ì¶”ê°€
            G.add_edge(df_pos.columns[i],df_pos.columns[j])
            #ì—£ì§€ ê°€ì¤‘ì¹˜ ì¶”ê°€
            if num_pre<len(G.edges):
                num_pre = len(G.edges)
                weight = 0
                if (df_pos.columns[i] in df_tr.columns)and(df_pos.columns[j] in df_tr.index):
                    if df_tr[df_pos.columns[i]][df_pos.columns[j]]:
                        weight = df_tr[df_pos.columns[i]][df_pos.columns[j]]*size
                elif(df_pos.columns[j] in df_tr.columns)and(df_pos.columns[i] in df_tr.index):
                    if df_tr[df_pos.columns[j]][df_pos.columns[i]]*size
                edge_weights.append(weight)

#ì¢Œí‘œ ì„¤ì •
pos = {}
for i in range(len(df_pos.columns)):
    node = df_pos.columns[i]
    pos[node] = (df_pos[node][0],df_pos[node][1])

#ê·¸ë¦¬ê¸°
nx.draw(G, pos, with_labels=True,font_size=16, node_size = 1000, node_color='k', font_color='w', width=edge_weights)

#í‘œì‹œ
plt.show()
```
![image](https://github.com/user-attachments/assets/ec6b4a02-19ca-43f3-bc3d-e74de1823861)

ğŸ” ì°½ê³  W1ì—ì„œ ê³µì¥ F1ìœ¼ë¡œ, ì°½ê³  W2ì—ì„œ ê³µì¥ F3ë¡œ, ì°½ê³  W3ì—ì„œ ê³µì¥ F2, F4ë¡œì˜ ê³µê¸‰ì´ ëŒ€ë¶€ë¶„ì´ê³  ê·¸ ì™¸ì˜ ê³µê¸‰ì€ ìµœì†Œí•œìœ¼ë¡œ ì œí•œë¨. => "ìš´ì†¡ ê²½ë¡œëŠ” ì–´ëŠ ì •ë„ ì§‘ì¤‘ë¼ì•¼ í•œë‹¤." ê°€ì„¤ì€ ì°¸.


## <span style= 'background-color: #f1f8ff'>7-3: ìµœì  ìš´ì†¡ ê²½ë¡œê°€ ì œì•½ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ”ì§€ í™•ì¸í•˜ì
ğŸ—ƒï¸ ì œì•½ ì¡°ê±´ ë§Œì¡± ì—¬ë¶€ í™•ì¸
```python
import pandas as pd
import numpy as np

#ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
df_demand = pd.read_csv('demand.csv')
df_supply = pd.read_csv('supply.csv')

#ì œì•½ ì¡°ê±´ ê³„ì‚° í•¨ìˆ˜
#ìˆ˜ìš”ì¸¡
def condition_demand(df_tr,df_demand):
    flag = np.zeros(len(df_demand.columns))
    for i in range(len(df_demand.columns)):
        temp_sum = sum(df_tr[df_demand.columns[i]])
        if (temp_sum>=df_demnad.iloc[0][i]):
            flag[i] = 1
    return flag

#ê³µê¸‰ì¸¡
def condition_supply(df_tr,df_supply):
    flag = np.zeros(len(df_supply.columns))
    for i in range(len(df_supply.columns)):
        temp_sum = sum(df_tr.loc[df_supply.columns[i]])
        if temp_sum<=df_supply.iloc[0][i]:
            flag[i] = 1
    return flag

print("ìˆ˜ìš” ì¡°ê±´ ê³„ì‚° ê²°ê³¼:"+str(condition_demand(df_tr_sol,df_demand)))
print("ê³µê¸‰ ì¡°ê±´ ê³„ì‚° ê²°ê³¼:"+str(condition_supply(df_tr_sol,df_supply)))
```
ìˆ˜ìš” ì¡°ê±´ ê³„ì‚° ê²°ê³¼:[1. 1. 1. 1.]
ê³µê¸‰ ì¡°ê±´ ê³„ì‚° ê²°ê³¼:[1. 1. 1.]


## <span style= 'background-color: #f1f8ff'>7-4: ìƒì‚° ê³„íš ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ì
![image](https://github.com/user-attachments/assets/099bbf67-648d-4e41-9b9c-c4ae3a7c49c0)

ğŸ—ƒï¸ ìƒì‚° ê³„íš ë°ì´í„° ë¦¬ë”©
```python
import pandas as pd

df_material = pd.read_csv('product_plan_material.csv', index_col="ì œí’ˆ")
print(df_material)
df_profit = pd.read_csv('product_plan_profit.csv', index_col="ì œí’ˆ")
print(df_profit)
df_stock = pd.read_csv('product_plan_stock.csv', index_col="í•­ëª©")
print(df_stock)
df_plan = pd.read_csv('product_plan.csv', index_col="ì œí’ˆ")
print(df_plan)
```
![image](https://github.com/user-attachments/assets/bfa149a7-edc0-48ea-9bd8-0f4cf938bab7)

ğŸ” í˜„ì¬ëŠ” ì´ìµì´ í° ì œí’ˆ1ë§Œ ìƒì‚°í•˜ê³  ìˆìœ¼ë©°, ì œí’ˆ2ëŠ” ìƒì‚°í•˜ì§€ ì•Šê³  ìˆìŒ. => ì›ë£Œê°€ íš¨ê³¼ì ìœ¼ë¡œ ì‚¬ìš©ë˜ì§€ ì•Šê³  ìˆê¸° ë•Œë¬¸ì— ì œí’ˆ2ì˜ ìƒì‚°ëŸ‰ì„ ëŠ˜ë¦°ë‹¤ë©´ ì´ìµì„ ë†’ì¼ ìˆ˜ ìˆì„ ê²ƒ.


## <span style= 'background-color: #f1f8ff'>7-5: ì´ìµì„ ê³„ì‚°í•˜ëŠ” í•¨ìˆ˜ë¥¼ ë§Œë“¤ì
ğŸ” ìƒì‚° ìµœì í™” í•´ê²° ë°©ë²•: ìµœì í™” ë¬¸ì œì˜ ì¼ë°˜ì ì¸ íë¦„ê³¼ ë™ì¼. ì¦‰ ëª©ì í•¨ìˆ˜ì™€ ì œì•½ ì¡°ê±´ì„ ì •ì˜í•˜ê³  ì œì•½ ì¡°ê±´ ì•„ë˜ì„œ ëª©ì í•¨ìˆ˜ë¥¼ ìµœì†Œí™”(ë˜ëŠ” ìµœëŒ€í™”)í•˜ëŠ” ë³€ìˆ˜ì˜ ì¡°í•©ì„ ì°¾ëŠ” ê²ƒ.

ğŸ—ƒï¸ ì´ìµ ê³„ì‚° í•¨ìˆ˜ ì •ì˜
```python
def product_plan(df_profit,df_plan):
    profit = 0
    for i in range(len(df_profit.index)):
        for j in range(len(df_plan.columns)):
            profit += df_profit.iloc[i][j]*df_plan.iloc[i][j]
        return profit

print("ì´ ì´ìµ:"+str(product_plan(df_profit,df_plan)))
```
ì´ ì´ìµ:80.0


## <span style= 'background-color: #f1f8ff'>7-6: ìƒì‚° ìµœì í™” ë¬¸ì œë¥¼ í’€ì–´ë³´ì
ğŸ—ƒï¸ ìƒì‚° ìµœì í™” ë¬¸ì œ í•´ê²°
```python
import pandas as pd
from pulp import LpVariable, lpSum, value
from ortoolpy import model_max, addvars, addvals

df = df_material.copy()
inv = df_stock

m = model_max()
v1 = {(i):LpVariable('v%d'%(i),lowBound=0) for i in range(len(df_profit))}
m += lpSum(df_profit.iloc[i]*v1[i] for i in range(len(df_profit)))
for i in range(len(df_material.columns)):
    m += lpSum(df_material.iloc[j,i]*v1[j] for j in range(len(df_profit))) <= df_stock.iloc[:,i]
m.solve()

df_plan_sol = df_plan.copy()
for k,x in v1.items():
    df_plan_sol.iloc[k] = value(x)
print(df_plan_sol)
print("ì´ ì´ìµ:"+str(value(m.objective)))
```
![image](https://github.com/user-attachments/assets/4fe19c6d-9e66-4288-be82-f7b45037441b)


## <span style= 'background-color: #f1f8ff'>7-7: ìµœì  ìƒì‚° ê³„íšì´ ì œì•½ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ”ì§€ í™•ì¸í•˜ì
ğŸ” ìµœì í™” ë¬¸ì œì—ì„œëŠ” ê²°ê³¼ë¥¼ ì´í•´í•˜ëŠ” ê²ƒì´ ì¤‘ìš”. ìƒì‚° ìµœì í™”ì— ìˆì–´ ê²°ê³¼ë¥¼ ì´í•´í•˜ëŠ” ë°©ë²•ì—ëŠ” ì œì•½ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ”ì§€ í™•ì¸í•˜ëŠ” ë°©ë²•ì´ ìˆìŒ.

ğŸ—ƒï¸ ì œì•½ ì¡°ê±´ ë§Œì¡± ì—¬ë¶€ í™•ì¸
```python
def condition_stock(df_plan, df_material, df_stock):
    flag = np.zeros(len(df_material.columns))
    for i in range(len(df_material.columns)):
        temp_sum = 0
        for j in range(len(df_material.index)):
            temp_sum = temp_sum + df_material.iloc[j][i]*float(df_plan.iloc[j])
        if (temp_sum<=float(df_stock.iloc[0][i])):
            flag[i] = 1
        print(df_material.columns[i]+" ì‚¬ìš©ëŸ‰:"+str(temp_sum)+", ì¬ê³ :"+str(float(df_stock.iloc[0][i])))
    return flag

print("ì œì•½ ì¡°ê±´ ê³„ì‚° ê²°ê³¼:"+str(condition_stock(df_plan_sol,df_material,df_stock)))
```
![image](https://github.com/user-attachments/assets/e88120a8-cb0c-464e-ae4f-82fc7e5423c0)


## <span style= 'background-color: #f1f8ff'>7-8: ë¬¼ë¥˜ ë„¤íŠ¸ì›Œí¬ ì„¤ê³„ ë¬¸ì œë¥¼ í’€ì–´ë³´ì
ğŸ” ë¬¼ë¥˜ ë„¤íŠ¸ì›Œí¬ì—ëŠ” ì œí’ˆì„ íŒë§¤í•˜ëŠ” ëŒ€ë¦¬ì ì´ ìˆê³ , ê±°ê¸°ì—ì„œ íŒë§¤ë˜ëŠ” ìƒí’ˆêµ°ì—ëŠ” ì¼ì •ì˜ ìˆ˜ìš”ê°€ ì˜ˆì¸¡ë¼ ìˆìœ¼ë©°, ê·¸ ìˆ˜ìš”ëŸ‰ì„ ê·¼ê±°ë¡œ ê³µì¥ì—ì„œì˜ ìƒì‚°ëŸ‰ì„ ê²°ì •í•¨. ê° ì œí’ˆì„ ì–´ëŠ ê³µì¥ì˜ ì–´ë–¤ ìƒì‚°ë¼ì¸ì—ì„œ ì œì¡°í• ì§€ëŠ” ê° ê³µì¥ì—ì„œ ëŒ€ë¦¬ì ê¹Œì§€ì˜ ìš´ì†¡ ë¹„ìš© ë° ì œì¡° ë¹„ìš© ë“±ì„ ê³ ë ¤í•´ì„œ ê²°ì •í•´ì•¼ í•˜ê¸°ì— ì‹¤ì œ ë¬¼ë¥˜ ë„¤íŠ¸ì›Œí¬ëŠ” ìš´ì†¡ ê²½ë¡œì™€ ìƒì‚° ê³„íš ìµœì í™” ë¬¸ì œë¥¼ ë™ì‹œì— ê³ ë ¤í•´ì•¼ í•¨.
![image](https://github.com/user-attachments/assets/e68401ca-8ff3-42bd-819b-bebb335ae6c8)

ğŸ—ƒï¸ ë¬¼ë¥˜ ë„¤íŠ¸ì›Œí¬ ìµœì  ì„¤ê³„
```python
import numpy as np
import pandas as pd

ì œí’ˆ = list('AB')
ìˆ˜ìš”ì§€ = list('PQ')
ê³µì¥ = list('XY')
ë ˆì¸ = (2,2)

#ìš´ì†¡ë¹„
tbdi = pd.DataFrame(((j,k) for j in ìˆ˜ìš”ì§€ for k in ê³µì¥), columns=['ìˆ˜ìš”ì§€','ê³µì¥'])
tbdi['ìš´ì†¡ë¹„'] = [1,2,3,1]
print(tbdi)

#ìˆ˜ìš”
tbde = pd.DataFrame(((j,i) for j in ìˆ˜ìš”ì§€ for i in ì œí’ˆ), columns=['ìˆ˜ìš”ì§€','ì œí’ˆ'])
tbde['ìˆ˜ìš”'] = [10,10,20,20]
print(tbde)

#ìƒì‚°
tbfa = pd.DataFrame(((k,l,i,0,np.inf) for k,nl in zip (ê³µì¥,ë ˆì¸) for l in range(nl) for i in ì œí’ˆ), columns=['ê³µì¥','ë ˆì¸','ì œí’ˆ','í•˜í•œ','ìƒí•œ'])
tbfa['ìƒì‚°ë¹„'] = [1,np.nan,np.nan,1,3,np.nan,5,3]
tbfa.dropna(inplace=True)
tbfa.loc[4,'ìƒí•œ']=10
print(tbfa)

from ortoolpy import logistics_network
_, tbdi2, _ = logistics_network(tbde, tbdi, tbfa,dep = "ìˆ˜ìš”ì§€", dem = "ìˆ˜ìš”", fac = "ê³µì¥", prd = "ì œí’ˆ", tcs = "ìš´ì†¡ë¹„", pcs = "ìƒì‚°ë¹„", lwb = "í•˜í•œ", upb = "ìƒí•œ")

print(tbfa)
print(tbdi2)
```
![image](https://github.com/user-attachments/assets/dcfe59bd-d5e4-477d-a7d9-0659f62fd4f9)


## <span style= 'background-color: #f1f8ff'>7-9: ìµœì  ë„¤íŠ¸ì›Œí¬ì˜ ìš´ì†¡ ë¹„ìš©ê³¼ ê·¸ ë‚´ì—­ì„ ê³„ì‚°í•˜ì
ğŸ—ƒï¸ ìš´ì†¡ ë¹„ìš© ê³„ì‚°
```python
tbdi2 = tbdi2[["ê³µì¥", "ëŒ€ë¦¬ì ", "ìš´ì†¡ë¹„", "ì œí’ˆ", "VsrX", "ValX"]]
tbdi2
```
![image](https://github.com/user-attachments/assets/99d03e8c-9cbe-49c5-8ddc-b153b5d988da)

```python
trans_cost = 0
for i in range(len(tbdi2.index)):
    trans_cost += tbdi2["ìš´ì†¡ë¹„"].iloc[i]*tbdi2["ValX"].iloc[i]
print("ì´ ìš´ì†¡ë¹„:"+str(trans_cost))
```
ì´ ìš´ì†¡ë¹„:80.0


## <span style= 'background-color: #f1f8ff'>7-10: ìµœì  ë„¤íŠ¸ì›Œí¬ì˜ ìƒì‚° ë¹„ìš©ê³¼ ê·¸ ë‚´ì—­ì„ ê³„ì‚°í•˜ì
ğŸ—ƒï¸ ìƒì‚° ë¹„ìš© ê³„ì‚°
```python
print(tbfa)
product_cost = 0
for i in range(len(tbfa.index)):
    product_cost += tbfa["ìƒì‚°ë¹„"].iloc[i]*tbfa["ValY"].iloc[i]
print("ì´ ìƒì‚°ë¹„:"+str(product_cost))
```
![image](https://github.com/user-attachments/assets/9461fe98-14e8-4f8b-8f16-dcb57752f3de)
ì´ ìƒì‚°ë¹„:120.0


### ì¶œì²˜ : íŒŒì´ì¬ ë°ì´í„°ë¶„ì„ ì‹¤ë¬´ í…Œí¬ë‹‰ 100